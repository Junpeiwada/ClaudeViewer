# UI設計 - Claude Code会話ログビューア（Tree View版）

## 画面構成（最新実装）

### 1. Tree View + HTML表示レイアウト
```
┌─────────────────────────────────────────────────────────────────────────┐
│  🏔️ Claude Code Viewer                              🔄更新      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────┐  │  ┌─────────────────────────────┐  │
│  │  📁 Project Tree                │  │  │     HTML Content View       │  │
│  │                                 │  │  │                             │  │
│  │  📁 -Users-...-ClaudeViewer [2] │  │  │  📋 📄 📤      [ファイル情報] │  │
│  │                                 │  │  │  ┌─────────────────────────┐  │  │
│  │  📁 -Users-...-AISandbox    [3] │  │  │  │ 🤖 Claude Code 会話履歴 │  │  │
│  │                                 │  │  │  │ Session: c1b7bb36...     │  │  │
│  │  📂 -Users-...-Eiken        [2] │  │  │  │                         │  │  │
│  │    ▼ 📄 a1b19a23...             │ ◀── │  │ ┌─────────────────────┐  │  │  │
│  │    ▼ 📄 cf1cd776...             │  │  │  │ │ 👤 User             │  │  │  │
│  │                                 │  │  │  │ │ 日本語での実際質問   │  │  │  │
│  │  📁 -Users-...-blog         [4] │  │  │  │ └─────────────────────┘  │  │  │
│  │                                 │  │  │  │ ┌─────────────────────┐  │  │  │
│  │  [矢印キーでナビゲーション]      │  │  │  │ │ 🤖 Claude           │  │  │  │
│  │  [スクロール対応]               │  │  │  │ │ 回答とコード...      │  │  │  │
│  │                                 │  │  │  │ └─────────────────────┘  │  │  │
│  └─────────────────────────────────┘  │  │  │ [テキスト選択・コピー] │  │  │
│                                     │  │  └─────────────────────────┘  │  │
│                                     │  └─────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────────┤
│  Status: 表示完了               選択: Eiken/cf1cd776... (155 msgs)   🌙│
└─────────────────────────────────────────────────────────────────────────┘
```

## コンポーネント仕様

### 1. 左ペイン: Project Tree View
- **サイズ**: 30%幅（最小250px、最大40%）
- **構造**: 
  ```
  📁 フォルダ名そのまま表示 [ファイル数]
    ▼ 展開状態
    ├─ 📄 a1b2c3d4... 1.2MB | 2025/9/8 14:11 ← 最新
    ├─ 📄 b2c3d4e5... 0.8MB | 2025/9/7 16:45
    └─ 📄 c3d4e5f6... 2.1MB | 2025/9/6 10:22 ← 古い
  ```
- **操作**:
  - **クリック**: プロジェクト展開/折り畳み
  - **ファイル選択**: 即座に右ペインへHTML表示
  - **右クリック**: Finderで表示メニュー
  - **ソート**: 日付降順（最新ファイルが自動的に上に表示）

### 2. 右ペイン: 最適化された会話表示
- **サイズ**: 70%幅（可変）
- **ツールバー**: 
  ```
  📋全選択 | 📄コピー | 📤エクスポート |           [ファイル情報]
  ```
- **会話表示エリア**: 
  - **チャット風UI**: LINEやiMessage風の会話レイアウト
  - **明確な視覚区別**:
    - ユーザーメッセージ: 白背景、右寄せ配置、80px左余白
    - Claudeメッセージ: 薄グレー背景(#f5f5f5)、左寄せ配置、80px右余白
  - **2層構造**: `chat-msg` + `chat-icon` + `chat-text`
  - **余白最適化**: より多くの会話内容を表示可能
  - **即座表示**: ファイル選択と同時に変換・表示
  - **スクロールリセット**: 新ファイル選択時は一番上にスクロール
  - **テキスト選択**: 全内容がコピー可能・長いURL折り返し対応

## インタラクション仕様

### 1. Tree View操作
| 操作 | 動作 |
|------|------|
| **フォルダクリック** | 展開/折り畳み（▼/▶アイコン変化） |
| **ファイルクリック** | 右ペインに即座HTML表示 |
| **↑↓キー** | Tree内ナビゲーション |
| **←→キー** | フォルダ展開/折り畳み |
| **右クリック** | Finderで表示 |

### 2. HTML表示エリア操作
| 操作 | 動作 |
|------|------|
| **📋ボタン** | 全内容選択 |
| **📄ボタン** | 選択部分コピー |
| **📤ボタン** | HTMLエクスポートダイアログ表示 |
| **Cmd+A** | 全内容選択 |
| **Cmd+C** | 選択部分コピー |
| **ドラッグ** | テキスト範囲選択 |

### 3. レスポンシブ動作
- **ウィンドウリサイズ**: レイアウト自動調整
- **最小幅維持**: Tree View 250px保証
- **スクロール独立**: 左右ペインそれぞれ独立スクロール

## 視覚的デザイン

### 1. Tree View スタイル
- **フォルダ**: 📁/📂アイコン、太字、ファイル数バッジ
- **ファイル**: 📄アイコン、セッションID短縮表示
- **ファイル情報**: "1.2MB | 2025/9/8 14:11" 形式（サイズ + 日付）
- **ソート**: 日付降順（最新ファイルが上）
- **選択状態**: 青色ハイライト、左ボーダー
- **展開状態**: ▶/▼アイコン、アニメーション

### 2. 最適化された会話表示エリア
- **ツールバー**: ガラスエフェクト、ホバーアニメーション
- **会話UI**: チャット風の最適化されたデザイン
  - **ユーザーメッセージ**: 白背景、右寄せ配置、👤アイコン
  - **Claudeメッセージ**: 薄グレー背景(#f5f5f5)、左寄せ配置、🤖アイコン
  - **80px非対称余白**: 明確な視覚的分離
  - **2層構造**: シンプルな`chat-msg` + `chat-icon` + `chat-text`
- **テキスト選択**: cursor: text、全ブラウザ対応、長いURL折り返し

### 3. レスポンシブ対応
- **ペイン比率**: 30%（Tree） + 70%（HTML）
- **最小サイズ**: 800x600px
- **テーマ対応**: ダーク/ライトモード自動切替

## ステータス・フィードバック

### 1. ステータスバー
- **左側**: 操作状況（変換中、表示完了、エラー等）
- **右側**: 選択ファイル情報（プロジェクト/ファイル名、メッセージ数）

### 2. 処理フィードバック
- **変換進行**: 🔄変換中 → 🎨HTML変換中 → ✅表示完了
- **エラー表示**: ❌エラー内容とガイダンス
- **統計情報**: メッセージ数、ファイル情報

## ユーザー体験

### 1. 直感的操作
- **Finder/Explorer風**: 階層ナビゲーション
- **ワンクリック表示**: 複雑な操作不要
- **キーボード対応**: 矢印キーでの高速ナビゲーション

### 2. 効率的表示
- **即座プレビュー**: モーダル不要の直接表示
- **高速変換**: TypeScript版extractor（元版準拠）
- **テキスト活用**: 完全なコピー・エクスポート機能

### 3. プロフェッショナル品質
- **フォルダ名そのまま**: 編集なしの正確表示
- **システムフィルタリング**: ノイズ除去で実際の会話のみ
- **レスポンシブ**: ウィンドウサイズ対応
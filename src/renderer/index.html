<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Viewer</title>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <h1>🏔️ Claude Code Viewer</h1>
                <div class="status-info">
                    <span id="status-text">Ready</span>
                </div>
            </div>
            <div class="header-right">
                <button id="refresh-btn" class="header-btn">
                    <span>🔄</span> 更新
                </button>
            </div>
        </header>
        
        <main class="main-content">
            <div class="content-panes">
                <!-- 左ペイン: Tree View -->
                <aside class="tree-pane">
                    <div class="pane-header">
                        <h3>📁 Project Tree</h3>
                    </div>
                    <div class="tree-view" id="tree-view">
                        <div class="project-list" id="project-list">
                            <!-- Tree構造がここに動的に生成される -->
                        </div>
                    </div>
                </aside>
                
                <!-- 右ペイン: HTML表示エリア -->
                <main class="html-pane">
                    <div class="html-toolbar">
                        <button id="html-select-all" class="html-btn" title="全選択 (Cmd+A)">📋</button>
                        <button id="html-copy" class="html-btn" title="選択部分をコピー (Cmd+C)">📄</button>
                        <button id="html-export" class="html-btn" title="エクスポート">📤</button>
                        <div class="html-toolbar-spacer"></div>
                        <span id="html-file-info" class="html-file-info">ファイルを選択してください</span>
                    </div>
                    <div class="html-content-container">
                        <div id="html-content-area" class="html-content-area">
                            <div class="welcome-html">
                                <h2>🏔️ Claude Code Viewer</h2>
                                <p>左のTree Viewからファイルを選択すると、ここに会話履歴が表示されます。</p>
                                <div class="welcome-features">
                                    <div>📋 テキスト選択・コピー対応</div>
                                    <div>📤 HTMLエクスポート機能</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </main>
        
        <footer class="app-footer">
            <div class="footer-content">
                <div class="status-left">
                    <span id="status-message">Ready</span>
                </div>
                <div class="status-right">
                    <span id="selection-info">プロジェクト未選択</span>
                    <span id="theme-indicator">🌙</span>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- コンテキストメニュー -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" id="context-show-in-finder">
            <span class="icon">📁</span>
            <span>Finderで表示</span>
        </div>
    </div>

    <!-- HTMLモーダル -->
    <div id="html-modal" class="html-modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="file-icon">📄</span>
                    <span id="modal-file-name">ファイル名</span>
                </div>
                <div class="modal-toolbar">
                    <button id="modal-prev" class="modal-btn" title="前のファイル">◀</button>
                    <button id="modal-next" class="modal-btn" title="次のファイル">▶</button>
                    <button id="modal-select-all" class="modal-btn" title="全選択 (Cmd+A)">📋</button>
                    <button id="modal-copy" class="modal-btn" title="選択部分をコピー (Cmd+C)">📄</button>
                    <button id="modal-export" class="modal-btn" title="エクスポート">📤</button>
                    <button id="modal-close" class="modal-btn modal-close" title="閉じる">×</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="modal-html-content" class="modal-html-content">
                    <!-- HTMLコンテンツがここに表示される -->
                </div>
            </div>
        </div>
    </div>

    <!-- エクスポートダイアログ -->
    <div id="export-modal" class="export-modal" style="display: none;">
        <div class="modal-overlay" onclick="hideExportModal()"></div>
        <div class="export-dialog">
            <div class="export-header">
                <h3>📤 エクスポート</h3>
                <button class="export-close" onclick="hideExportModal()">×</button>
            </div>
            <div class="export-body">
                <div class="export-info">
                    <div class="export-file-info">
                        <span class="export-icon">📄</span>
                        <div class="export-details">
                            <div id="export-filename" class="export-filename">ファイル名</div>
                            <div id="export-filesize" class="export-filesize">ファイルサイズ</div>
                        </div>
                    </div>
                </div>
                
                <div class="export-format">
                    <h4>エクスポート形式</h4>
                    <div class="format-options">
                        <div class="format-single">
                            <span class="format-icon">🌐</span>
                            <span class="format-text">
                                <div class="format-name">HTML</div>
                                <div class="format-desc">スタンドアロンHTMLファイル - どこでも開けます</div>
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="export-actions">
                    <button id="export-cancel" class="export-btn export-cancel">キャンセル</button>
                    <button id="export-save" class="export-btn export-primary">エクスポート</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>